# 11. 分析サービス
## 11.1. EMR
- **EMR**は分散処理フレームワークで分散処理基盤と分散処理アプリケーションの機能を持つ

### アーキテクチャ
- EMRはマスターノード、コアノード、タスクノードで構成される
  - マスタノード
    - コアノードとタスクノードにジョブを振り分ける
    - マスターノードは1台のみでFOは不可
  - コアノード
    - 実際のジョブを実行するノード
    - データを保存する領域であるHDFS(`Hadoop Distributed File System`)を持つ
  - タスクノード
    - 実際のジョブを実行するノード
    - HDFSを持たないため、コアノードよりも柔軟に増減が可能
    - コアノードなしでタスクノードのみの構成は不可

### 分散処理基盤
- 処理基板としてのリソース調整機能を持つ
  - 分散処理に必要なEC2の調達/廃棄
- 伸縮自在性
  - 処理するEC2インスタンスは解析開始時に調達し、必要に応じて増減させる
  - デフォルトの設定では解析完了すると自動的にリソースが開放される
- コスト
  - スポットインスタンスと相性が良いため、スポットインスタンスのオプションが存在する
  - 全体の処理を複数のジョブに分割して、インスタンスに振り分ける
    - インスタンスが何らかの理由でジョブが完了できない場合は別のインスタンスに振り分ける
      - スポットインスタンスは入札価格よりも時価が上回った場合は強制的に利用が中断されるが、上記によって回避できる

## 11.2. ETLツール
### Kinesis
- **Kinesis**はストリーミング処理プラットフォームで下記の機能がある
- **Data Streams**、**Data Firehose**
  - センサーやログなどのデータをリアルタイム/準リアルタイムで処理する
- **Video Streams**
  - 動画を処理する
- **Data Analytics**
  - 収集したデータを可視化する

### Data Pipeline
- **Data Pipeline**はデータ処理やデータ移動を支援するサービス
- パイプラインを設定すると、オンプレやAWS上の特定の場所に定期的にアクセスし、必要に応じてデータを変換し、S3/RDS/DynamoDB等に転送する
